
**阿里前端工程师之路**

**HTML&CSS：**
	**对Web标准的理解、浏览器内核差异、兼容性、hack、CSS基本功：布局、盒子模型、选择器优先级、HTML5、CSS3、Flexbox**


# day2：浏览器内核差异 #

## 什么是浏览器内核 ##
“Rendering Engine”——解释引擎

功能：负责对网页语法的解释并渲染网页，决定了浏览器如何显示网页的内容以及页面的格式信息，同一网页在不同的内核的浏览器里的渲染效果也可能不同。编写者需要在不同内核浏览器中测试显示效果。


## 浏览器内核种类 ##
1、Trident： IE浏览器使用的内核

有许多采用IE内核而非IE的浏览器，IE没有使用W3C的标准

2、Gecko： Netscape6开始采用的内核，后来的Mozilla FireFox (火狐浏览器) 也采用了该内核。

特点：是代码完全公开，因此，其可开发程度很高，全世界的程序员都可以为其编写代码，增加功能。

3、Presto：Opera采用的内核

特点：渲染速度的优化达到了极致，也是目前公认网页浏览速度最快的浏览器内核，然而代价是牺牲了网页的兼容性

最大区别：页面的全部或者部分都能够在回应脚本事件时等情况下被重新解析。

4、Webkit:apple 的safari(win/mac/iphone/ipad) 、google的chrome、塞班手机浏览器、Android手机默认的浏览器

5、khtml(Linux)

  KDE开发的内核，速度快捷，容错率低，这种内核不见得有很多人知道，但后面看下去你就会明白，常见的khtml内核的浏览器有：konqueror

## 浏览器渲染原理 ##

页面渲染：浏览器将html代码根据CSS定义的规则显示在浏览器窗口的过程

1. 用户输入网址，浏览器向服务器发出请求，服务器返回html文件
2. 浏览器载入html代码，发现`<head>`标签中有一个`<link>`标签引用外部CSS文件
3. 浏览器发出CSS文件请求，服务器返回文件
4. 载入`<body>`部分，借助CSS渲染页面
5. 浏览器发现`<img>`，向服务器发出请求，不停留继续渲染后面的代码
6. 服务器返回图片，影响后面段落布局，浏览器重新渲染这部分代码
7. 浏览器发现`<script>`，马上运行
8. 遇到新的CSS，重新渲染
9. 遇到`</html>`，停止

## 页面重构 ##

回退的过程:reflow
应尽量减少不必要的reflow

重绘：repaint

## 从浏览器渲染原理讲CSS性能 ##

最终决定浏览器表现出来的页面效果的差异是：渲染引擎 Rendering Engine（“浏览器内核”）

主要的流程就是：构建一个dom树，页面要显示的各元素都会创建到这个dom树当中，每当一个新元素加入到这个dom树当中，浏览器便会通过css引擎查遍css样式表，找到符合该元素的样式规则应用到这个元素上。

**CSS引擎查找样式表：从右向左匹配**

CSS查找性能提升的方法：


    1、避免使用通配规则
    2、尽量少的去对标签进行选择，而是用class
    3、不要去用标签限定ID或者类选择符   如：ul#nav,应该简化为#nav
    4、尽量少的去使用后代选择器，降低选择器的权重值
    5、考虑继承

## 面试问题：谈谈浏览器兼容性 ##
自己遇到的最严重的兼容性case，需求是什么，一开始怎么做的，怎么发现有问题，怎么找到问题的原因，有哪些解决方案，最后选了哪一种，为什么选这种方式，这个过程里学到了什么，再做一次类似case会有什么改变，将来怎么避免等等。


1、不同浏览器的标签默认的外补丁和内补丁不同问题症状

	随便写几个标签，不加样式控制的情况下，各自的margin 和padding差异较大。解决方案：CSS里加 *{margin:0;padding:0;}备注：几乎所有的CSS文件开头都会用通配符*来设置各个标签的内外补丁是0。

2、块属性标签float后，又有横行的margin情况下，在IE6显示margin比设置的大（即双倍边距bug）

	问题症状：常见症状是IE6中后面的一块被顶到下一行
	解决方案：在float的标签样式控制中加入 display:inline;将其转化为行内属性

3、图片默认有间距问题症状

	几个img标签放在一起的时候，有些浏览器会有默认的间距，加了问题一中提到的通配符也不起作用。解决方案：使用float属性为img布局备注：因为img标签是行内属性标签，所以只要不超出容器宽度，img标签都会排在一行里，但是部分浏览器的img标签之间会有个间距。使用float是正道。


## 面试问题：介绍一下你对浏览器内核的理解？ ##

主要分成两部分：渲染引擎(layoutengineer或RenderingEngine)和JS引擎。

渲染引擎：负责取得网页的内容（HTML、XML、图像等等）、整理讯息（例如加入CSS等），以及计算网页的显示方式，然后会输出至显示器或打印机。浏览器的内核的不同对于网页的语法解释会有不同，所以渲染的效果也不相同。所有网页浏览器、电子邮件客户端以及其它需要编辑、显示网络内容的应用程序都需要内核。

JS引擎则：解析和执行javascript来实现网页的动态效果。

最开始渲染引擎和JS引擎并没有区分的很明确，后来JS引擎越来越独立，内核就倾向于只指渲染引擎。

